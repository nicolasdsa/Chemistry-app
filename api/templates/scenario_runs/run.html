{% extends "base.html" %}

{% block title %}Executando cenário{% endblock %}

{% block content %}
  <section>
    <h2>{{ scenario.title }}</h2>
    <p>{{ scenario.description }}</p>
  </section>

  <div class="run-layout live-layout">
    <!-- CÂMERA -->
    <section class="panel camera-panel">
      <div class="panel-header">
        <h3>Câmera da bancada</h3>
        <small>Usando feed de /camera/stream</small>
      </div>
      <div class="camera-frame">
        <img src="/camera/stream" alt="Câmera do experimento" id="camera-stream" />
      </div>
    </section>

    <!-- VISUALIZAÇÃO + ESTADO -->
    <section class="panel viz-panel">
      <div class="panel-header">
        <h3>Visualização do experimento</h3>
        <small>Atualizado automaticamente via ArUco</small>
      </div>
      <section id="run-state"
               class="run-state"
               hx-get="/ui/scenario-runs/{{ run_state.run_id }}/state"
               hx-trigger="load, every 1s"
               hx-target="#run-state"
               hx-swap="innerHTML">
        Carregando estado da simulação...
      </section>
    </section>

    <!-- PASSOS -->
    <section class="panel steps-panel" id="scenario-steps">
      <!-- hx-swap-oob preenche -->
    </section>
  </div>
{% endblock %}
